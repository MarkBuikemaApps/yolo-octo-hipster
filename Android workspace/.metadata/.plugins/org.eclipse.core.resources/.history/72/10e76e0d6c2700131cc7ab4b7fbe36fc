package com.markbuikema.juliana32.adapter;

import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentStatePagerAdapter;
import android.support.v4.view.ViewPager;

import com.markbuikema.juliana32.model.FacebookNieuwsItem;
import com.markbuikema.juliana32.ui.NormalSectionFragment;
import com.markbuikema.juliana32.ui.PhotoSectionFragment;
import com.markbuikema.juliana32.util.Tools;

public class PhotoPagerAdapter extends FragmentStatePagerAdapter {

	private FacebookNieuwsItem item;
	private ViewPager pager;

	public PhotoPagerAdapter(FragmentManager fm, FacebookNieuwsItem item, ViewPager pager) {
		super(fm);
		this.item = item;
		this.pager = pager;
	}

	@Override
	public Fragment getItem(int i) {
		Fragment fragment;
		if (i == 0)
			fragment = NormalSectionFragment.newInstance(item);
		else {
			String url = Tools.PHOTO_URL_PREFIX + item.getPhoto(i - 1) + Tools.PHOTO_URL_SUFFIX;
			fragment = PhotoSectionFragment.newInstance(url);
		}
		pager.invalidate();
		return fragment;
	}

	@Override
	public CharSequence getPageTitle(int position) {
		return Integer.toString(position);
	}

	@Override
	public int getCount() {
		return item.getPhotoCount() + 1;
	}

}