package com.markbuikema.juliana32.sections;

import java.util.ArrayList;
import java.util.Collections;

import android.support.v4.view.ViewPager;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.FrameLayout.LayoutParams;
import android.widget.ListView;

import com.markbuikema.juliana32.R;
import com.markbuikema.juliana32.activities.MainActivity;
import com.markbuikema.juliana32.model.TableRow;
import com.markbuikema.juliana32.model.Team;
import com.markbuikema.juliana32.tools.FixtureAdapter;
import com.markbuikema.juliana32.tools.TableAdapter;

public class TeamDetail {

	private Team team;
	private MainActivity activity;

	private Button uitslagenButton;
	private Button programmaButton;

	private ViewPager photoPager;
	private ListView table;

	private ListView uitslagen;
	private ListView programma;

	@SuppressWarnings("unchecked")
	public TeamDetail(MainActivity activity, Team team) {
		this.team = team;
		this.activity = activity;

		View mainView = activity.findViewById(R.id.teamDetailView);

		uitslagenButton = (Button) mainView.findViewById(R.id.uitslagenButton);
		programmaButton = (Button) mainView.findViewById(R.id.programmaButton);

		uitslagenButton.setOnClickListener(new OnClickListener() {

			@Override
			public void onClick(View v) {
				toggleUitslagen();
			}
		});

		programmaButton.setOnClickListener(new OnClickListener() {

			@Override
			public void onClick(View v) {
				toggleProgramma();
			}
		});

		uitslagen = (ListView) mainView.findViewById(R.id.uitslagenList);
		programma = (ListView) mainView.findViewById(R.id.programmaList);

		photoPager = (ViewPager) mainView.findViewById(R.id.photoPager);
		table = (ListView) mainView.findViewById(R.id.tableListView);

		table.setClickable(false);

		ArrayList<TableRow> tableList = team.getTable();
		Collections.sort(tableList);
		
		table.setAdapter(new TableAdapter(activity, tableList));
		uitslagen.setAdapter(new FixtureAdapter(activity, team.getUitslagen()));
		programma.setAdapter(new FixtureAdapter(activity, team.getProgramma()));

		toggleUitslagen();
		toggleProgramma();
		
		table.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,
        LayoutParams.MATCH_PARENT));
	}

	public void toggleUitslagen() {
		if (uitslagen.getVisibility() == View.VISIBLE)
			uitslagen.setVisibility(View.GONE);
		else
			uitslagen.setVisibility(View.VISIBLE);
	}

	public void toggleProgramma() {
		if (programma.getVisibility() == View.VISIBLE)
			programma.setVisibility(View.GONE);
		else
			programma.setVisibility(View.VISIBLE);
	}

}
