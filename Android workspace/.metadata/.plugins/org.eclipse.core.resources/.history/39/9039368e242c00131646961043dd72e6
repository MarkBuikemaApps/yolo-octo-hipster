package com.markbuikema.juliana32.model;

import java.util.ArrayList;
import java.util.GregorianCalendar;

public abstract class NieuwsItem implements Comparable<NieuwsItem> {

	protected int id;
	protected String title;
	protected String subTitle;
	protected ArrayList<String> photos;
	private GregorianCalendar createdAt;

	public NieuwsItem(int id, String title, String subTitle, GregorianCalendar createdAt) {
		this.id = id;
		this.title = title;
		this.subTitle = subTitle;
		this.createdAt = createdAt;

		photos = new ArrayList<String>();
	}

	public void addPhoto(String url) {
		photos.add(url);
	}

	public int getPhotoCount() {
		return photos.size();
	}

	public String getPhoto(int index) {
		return photos.get(index);
	}

	public boolean isFromFacebook() {
		return this instanceof FacebookNieuwsItem && id == -1;
	}

	public int getId() {
		return id;
	}

	public String getTitle() {
		return title;
	}

	public String getSubTitle() {
		return subTitle;
	}

	@Override
	public String toString() {
		return id + ": " + title + "," + subTitle + ".";
	}

	@Override
	public int compareTo(NieuwsItem another) {
		if (another instanceof TeaserNieuwsItem)
			return 0;
		long thisDate;
		long otherDate;

		if (another instanceof NormalNieuwsItem)
			otherDate = ((NormalNieuwsItem) another).getCreatedAt().getTimeInMillis();
		else
			otherDate = ((FacebookNieuwsItem) another).getCreatedAt().getTimeInMillis();

		if (this instanceof NormalNieuwsItem)
			thisDate = ((NormalNieuwsItem) this).getCreatedAt().getTimeInMillis();
		else
			thisDate = ((FacebookNieuwsItem) this).getCreatedAt().getTimeInMillis();

		return thisDate <= otherDate ? 1 : -1;
	}

	public String[] getPhotos() {

		return photos.toArray(new String[photos.size()]);
	}

}
